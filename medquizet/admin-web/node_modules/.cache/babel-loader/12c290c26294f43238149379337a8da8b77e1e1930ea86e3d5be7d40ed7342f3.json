{"ast":null,"code":"import _slicedToArray from\"/home/babi/Desktop/Medical-Question-Bank/Medical-Question-Bank-Website/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useMemo,useEffect}from\"react\";import{makeStyles}from\"@mui/styles\";import CourseFilterDropDown from\"../../courses/components/CourseFilterDropDown.js\";import{useTheme}from\"@mui/material/styles\";import{useSelector}from\"react-redux\";import FilterAltIcon from\"@mui/icons-material/FilterAlt\";import AddIcon from\"@mui/icons-material/Add\";import UnitFilterDropDown from\"../../units/components/UnitFilterDropDown.js\";import{Box,Button,Container,TextField,InputAdornment,Stack,Typography}from\"@mui/material\";import SearchIcon from\"@mui/icons-material/Search\";import QuestionSetList from\"./QuestionSetList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{mainContainer:{paddingTop:theme.spacing(8),paddingBottom:theme.spacing(8)}};});var QuestionSetComponent=function QuestionSetComponent(_ref){var setSelectedComponent=_ref.setSelectedComponent;var _useSelector=useSelector(function(state){return state.courses;}),courses=_useSelector.courses;var _useSelector2=useSelector(function(state){return state.units;}),units=_useSelector2.units;var _useSelector3=useSelector(function(state){return state.questions;}),questions=_useSelector3.questions;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filterCourse=_useState2[0],setfilterCourse=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),filterUnit=_useState4[0],setfilterUnit=_useState4[1];var _useState5=useState(units),_useState6=_slicedToArray(_useState5,2),selectedUnits=_useState6[0],setSelectedUnits=_useState6[1];var theme=useTheme();var classes=useStyles();var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchTerm=_useState8[0],setSearchTerm=_useState8[1];var handleSearchChange=function handleSearchChange(event){setSearchTerm(event.target.value);};var filteredQuestions=useMemo(function(){if(!questions||!questions.length||!Array.isArray(questions))return[];return questions===null||questions===void 0?void 0:questions.filter(function(questionSet){var _questionSet$title,_questionSet$title$to;var searchMatches=questionSet===null||questionSet===void 0?void 0:(_questionSet$title=questionSet.title)===null||_questionSet$title===void 0?void 0:(_questionSet$title$to=_questionSet$title.toLowerCase())===null||_questionSet$title$to===void 0?void 0:_questionSet$title$to.includes(searchTerm===null||searchTerm===void 0?void 0:searchTerm.toLowerCase());var filterMatchCourse=[];if(filterCourse){filterMatchCourse=(questionSet===null||questionSet===void 0?void 0:questionSet.courseId)===parseInt(filterCourse);}var filterMatchUnit=[];if(filterUnit){filterMatchUnit=(questionSet===null||questionSet===void 0?void 0:questionSet.unitId)===parseInt(filterUnit);}return searchMatches&&filterMatchCourse&&filterMatchUnit;});},[questions,searchTerm,filterCourse,filterUnit]);useEffect(function(){if(filterCourse){setSelectedUnits(selectedUnits===null||selectedUnits===void 0?void 0:selectedUnits.filter(function(unit){return(unit===null||unit===void 0?void 0:unit.courseId)===filterCourse;}));}else{setSelectedUnits(units);}},[filterCourse,setSelectedUnits,selectedUnits,units]);return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",className:classes.mainContainer,children:/*#__PURE__*/_jsxs(Box,{flexGrow:1,bgcolor:\"background.default\",p:3,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",mb:2,sx:{flexDirection:{xs:\"column\",md:\"row\",gap:\"20px\",justifyContent:\"space-between\"}},children:[/*#__PURE__*/_jsx(Box,{mr:2,sx:{width:{xs:\"100%\",md:\"400px\"}},children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",placeholder:\"Search question\",variant:\"outlined\",size:\"small\",fullWidth:true,value:searchTerm,onChange:handleSearchChange,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{})})},InputLabelProps:{shrink:false}})}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setSelectedComponent(\"question/create\");},variant:\"contained\",color:\"primary\",sx:{alignSelf:\"flex-end\"},startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add Questions\"})]}),/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"right\",children:/*#__PURE__*/_jsxs(Stack,{sx:{flexDirection:\"row\",mt:\"25px\",gap:\"15px\",justifyContent:\"center\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(Stack,{flexDirection:\"row\",sx:{justifyContent:\"center\",alignItems:\"center\",gap:\"5px\"},children:[/*#__PURE__*/_jsx(FilterAltIcon,{}),/*#__PURE__*/_jsx(Typography,{sx:{fontSize:\"1.43rem\"},children:\"Filter by\"})]}),/*#__PURE__*/_jsx(CourseFilterDropDown,{filterCourse:filterCourse,setfilterCourse:setfilterCourse,courses:courses}),/*#__PURE__*/_jsx(UnitFilterDropDown,{units:selectedUnits,filterUnit:filterUnit,setfilterUnit:setfilterUnit})]})}),/*#__PURE__*/_jsx(QuestionSetList,{setSelectedComponent:setSelectedComponent,filteredQuestions:filteredQuestions}),/*#__PURE__*/_jsx(\"style\",{children:\"@media (max-width: \".concat(theme.breakpoints.values.md,\"px) {\\n            .MuiGrid-item {\\n              flex-basis: calc(100% - 80px);\\n              max-width: calc(100% - 80px);\\n            }\\n          }\")})]})});};export default QuestionSetComponent;","map":{"version":3,"names":["React","useState","useMemo","useEffect","makeStyles","CourseFilterDropDown","useTheme","useSelector","FilterAltIcon","AddIcon","UnitFilterDropDown","Box","Button","Container","TextField","InputAdornment","Stack","Typography","SearchIcon","QuestionSetList","useStyles","theme","mainContainer","paddingTop","spacing","paddingBottom","QuestionSetComponent","setSelectedComponent","state","courses","units","questions","filterCourse","setfilterCourse","filterUnit","setfilterUnit","selectedUnits","setSelectedUnits","classes","searchTerm","setSearchTerm","handleSearchChange","event","target","value","filteredQuestions","length","Array","isArray","filter","questionSet","searchMatches","title","toLowerCase","includes","filterMatchCourse","courseId","parseInt","filterMatchUnit","unitId","unit","flexDirection","xs","md","gap","justifyContent","width","endAdornment","shrink","alignSelf","mt","alignItems","fontSize","breakpoints","values"],"sources":["/home/babi/Desktop/Medical-Question-Bank/Medical-Question-Bank-Website/admin/src/features/questionsets/components/QuestionSetComponent.js"],"sourcesContent":["import React, { useState, useMemo, useEffect } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\nimport CourseFilterDropDown from \"../../courses/components/CourseFilterDropDown.js\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { useSelector } from \"react-redux\";\nimport FilterAltIcon from \"@mui/icons-material/FilterAlt\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport UnitFilterDropDown from \"../../units/components/UnitFilterDropDown.js\";\n\nimport {\n  Box,\n  Button,\n  Container,\n  TextField,\n  InputAdornment,\n  Stack,\n  Typography,\n} from \"@mui/material\";\nimport SearchIcon from \"@mui/icons-material/Search\";\n\nimport QuestionSetList from \"./QuestionSetList\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainContainer: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n}));\n\nconst QuestionSetComponent = ({ setSelectedComponent }) => {\n  const { courses } = useSelector((state) => state.courses);\n  const { units } = useSelector((state) => state.units);\n  const { questions } = useSelector((state) => state.questions);\n  const [filterCourse, setfilterCourse] = useState(\"\");\n  const [filterUnit, setfilterUnit] = useState(\"\");\n  const [selectedUnits, setSelectedUnits] = useState(units);\n\n  const theme = useTheme();\n\n  const classes = useStyles();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const handleSearchChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const filteredQuestions = useMemo(() => {\n    if (!questions || !questions.length || !Array.isArray(questions)) return [];\n\n    return questions?.filter((questionSet) => {\n      const searchMatches = questionSet?.title\n        ?.toLowerCase()\n        ?.includes(searchTerm?.toLowerCase());\n\n      let filterMatchCourse = [];\n\n      if (filterCourse) {\n        filterMatchCourse = questionSet?.courseId === parseInt(filterCourse);\n      }\n\n      let filterMatchUnit = [];\n\n      if (filterUnit) {\n        filterMatchUnit = questionSet?.unitId === parseInt(filterUnit);\n      }\n\n      return searchMatches && filterMatchCourse && filterMatchUnit;\n    });\n  }, [questions, searchTerm, filterCourse, filterUnit]);\n\n  useEffect(() => {\n    if (filterCourse) {\n      setSelectedUnits(\n        selectedUnits?.filter((unit) => unit?.courseId === filterCourse)\n      );\n    } else {\n      setSelectedUnits(units);\n    }\n  }, [filterCourse, setSelectedUnits, selectedUnits, units]);\n\n  return (\n    <Container maxWidth=\"lg\" className={classes.mainContainer}>\n      <Box flexGrow={1} bgcolor=\"background.default\" p={3}>\n        <Box\n          display=\"flex\"\n          alignItems=\"center\"\n          justifyContent=\"space-between\"\n          mb={2}\n          sx={{\n            flexDirection: {\n              xs: \"column\",\n              md: \"row\",\n              gap: \"20px\",\n              justifyContent: \"space-between\",\n            },\n          }}\n        >\n          <Box mr={2} sx={{ width: { xs: \"100%\", md: \"400px\" } }}>\n            <TextField\n              id=\"outlined-basic\"\n              placeholder=\"Search question\"\n              variant=\"outlined\"\n              size=\"small\"\n              fullWidth\n              value={searchTerm}\n              onChange={handleSearchChange}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon />\n                  </InputAdornment>\n                ),\n              }}\n              InputLabelProps={{\n                shrink: false,\n              }}\n            />\n          </Box>\n          <Button\n            onClick={() => setSelectedComponent(\"question/create\")}\n            variant=\"contained\"\n            color=\"primary\"\n            sx={{\n              alignSelf: \"flex-end\",\n            }}\n            startIcon={<AddIcon />}\n          >\n            Add Questions\n          </Button>\n        </Box>\n\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"right\">\n          <Stack\n            sx={{\n              flexDirection: \"row\",\n              mt: \"25px\",\n              gap: \"15px\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            }}\n          >\n            <Stack\n              flexDirection=\"row\"\n              sx={{\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                gap: \"5px\",\n              }}\n            >\n              <FilterAltIcon />\n              <Typography\n                sx={{\n                  fontSize: \"1.43rem\",\n                }}\n              >\n                Filter by\n              </Typography>\n            </Stack>\n\n            <CourseFilterDropDown\n              filterCourse={filterCourse}\n              setfilterCourse={setfilterCourse}\n              courses={courses}\n            />\n\n            <UnitFilterDropDown\n              units={selectedUnits}\n              filterUnit={filterUnit}\n              setfilterUnit={setfilterUnit}\n            />\n          </Stack>\n        </Box>\n        <QuestionSetList\n          setSelectedComponent={setSelectedComponent}\n          filteredQuestions={filteredQuestions}\n        />\n        <style>\n          {`@media (max-width: ${theme.breakpoints.values.md}px) {\n            .MuiGrid-item {\n              flex-basis: calc(100% - 80px);\n              max-width: calc(100% - 80px);\n            }\n          }`}\n        </style>\n      </Box>\n    </Container>\n  );\n};\nexport default QuestionSetComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}